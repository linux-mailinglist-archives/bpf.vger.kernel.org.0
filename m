Return-Path: <bpf-owner@vger.kernel.org>
X-Original-To: lists+bpf@lfdr.de
Delivered-To: lists+bpf@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 065233D9A9B
	for <lists+bpf@lfdr.de>; Thu, 29 Jul 2021 02:54:03 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S232982AbhG2AyE (ORCPT <rfc822;lists+bpf@lfdr.de>);
        Wed, 28 Jul 2021 20:54:04 -0400
Received: from m13135.mail.163.com ([220.181.13.135]:28238 "EHLO
        m13135.mail.163.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S232837AbhG2AyE (ORCPT <rfc822;bpf@vger.kernel.org>);
        Wed, 28 Jul 2021 20:54:04 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
        s=s110527; h=Date:From:Subject:MIME-Version:Message-ID; bh=7eYrY
        smNvzN7BkFXYlSINiI/AyveP/IxZ/MpyAxZLFA=; b=qQslX/JFQU7QNjznGyDeX
        yuC0B88/Mab9rzO9si5CQw5oadWmdIoIBzvoS2pMUVYju4etOnaJc9pZxA1l6Y0d
        sc/2z/C7QgEkS84N4xRalKkOeCeXgsdwNxAxIEptNk1gb3yRH+IOChBm5EWoh2Ua
        4uKR8mkrmzVTNVfWMgbyJw=
Received: from chapterk93$163.com ( [50.116.48.251] ) by
 ajax-webmail-wmsvr135 (Coremail) ; Thu, 29 Jul 2021 08:53:56 +0800 (CST)
X-Originating-IP: [50.116.48.251]
Date:   Thu, 29 Jul 2021 08:53:56 +0800 (CST)
From:   G <chapterk93@163.com>
To:     "Zvi Effron" <zeffron@riotgames.com>
Cc:     "bpf@vger.kernel.org" <bpf@vger.kernel.org>
Subject: Re: using "BPF_MAP_TYPE_DEVMAP" when pinning it to a global path
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.13 build 20210104(ab8c30b6)
 Copyright (c) 2002-2021 www.mailtech.cn 163com
In-Reply-To: <CAC1LvL11BVD38bnivBQMFnFdADe4SU5zNOutVco0pdnVXZCbcA@mail.gmail.com>
References: <384aaee4.1b40.17aeb053a78.Coremail.chapterk93@163.com>
 <CAC1LvL11BVD38bnivBQMFnFdADe4SU5zNOutVco0pdnVXZCbcA@mail.gmail.com>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset=UTF-8
MIME-Version: 1.0
Message-ID: <5de6d3ab.651.17aefc0efa5.Coremail.chapterk93@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID: h8GowADn96Ak_AFhlPICAQ--.13896W
X-CM-SenderInfo: hfkd135hunmji6rwjhhfrp/1tbiqwre4FUMaUHhBAACsJ
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==
Precedence: bulk
List-ID: <bpf.vger.kernel.org>
X-Mailing-List: bpf@vger.kernel.org

ClRoYW5rIHlvdSBmb3IgeW91ciBhbnN3ZXIuIE1heWJlIG15IGRlc2NyaXB0aW9uIGlzIG5vdCBj
bGVhci4gCgpJZiB3ZSBzZXQgdGhlIGZsYWcgdG8gMCB3aGVuIHdlIGZpcnN0IGNyZWF0ZSB0aGUg
bWFwLCBpdCBpcyBvay4KCklmIGZsYWcgaXMgc2V0IHRvIDB4ODAgd2hlbiB0aGUgbWFwIGlzIGNy
ZWF0ZWQgZm9yIHRoZSBmaXJzdCB0aW1lLCBhbiBlcnJvciB3aWxsIG9jY3VyLiBUaGUgaW5mb3Jt
YXRpb24gaXMgYXMgZm9sbG93cywgYW5kIHRoZSBlcnJvciBjb2RlIGlzwqAgYC1FSU5WQWAgCi0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KCjxlcnJvdXQ6IE1hcCBvYmplY3QgJ3Rlc3RfcmVkaXJlY3Qn
IHJlamVjdGVkOiBJbnZhbGlkIGFyZ3VtZW50ICgyMikhCsKgLSBUeXBlOsKgwqDCoMKgwqDCoMKg
wqAgMTQKwqAtIElkZW50aWZpZXI6wqDCoCAwCsKgLSBQaW5uaW5nOsKgwqDCoMKgwqAgMgrCoC0g
U2l6ZSBrZXk6wqDCoMKgwqAgNArCoC0gU2l6ZSB2YWx1ZTrCoMKgIDQKwqAtIE1heCBlbGVtczrC
oMKgwqAgMQrCoC0gRmxhZ3M6wqDCoMKgwqDCoMKgwqAgMHg4MMKgwqDCoMKgIAoKRXJyb3IgbG9h
ZGluZyBtYXBzIGludG8ga2VybmVsIQpFcnJvciBmZXRjaGluZyBFTEYgYW5jaWxsYXJ5IGRhdGEh
CgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCklmIEkgc2V0IHRoZSBmbGFnIHRvIDAgdGhlIGZpcnN0
IHRpbWUsIHRoZSBtYXAgY2FuIGJlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LCBidXQgd2hlbiBJIGxv
YWQgdGhlIHNlY29uZCBwcm9ncmFtLCBJIGdldCBhIGNoZWNrIGVycm9yLgpUaGlzIGlzIGJlY2F1
c2UgaXByb3V0ZTIgd2lsbCB2ZXJpZnkgdGhhdCB0aGUgcGFyYW1ldGVycyBvZiB0aGUgbWFwcyB3
aXRoIHRoZSBwaW4gdGFnIAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo8ZXJyb3V0OiBNYXAgc3BlY2lm
aWNhdGlvbiBkaWZmZXJzIGZyb20gcGlubmVkIGZpbGUhCsKgLSBGbGFnczrCoMKgwqDCoMKgwqDC
oCAwIChvYmopICE9IDB4ODAgKHBpbikKCk1hcCAndGVzdF9yZWRpcmVjdCcgc2VsZi1jaGVjayBm
YWlsZWQhCkVycm9yIGxvYWRpbmcgbWFwcyBpbnRvIGtlcm5lbCEKRXJyb3IgZmV0Y2hpbmcgRUxG
IGFuY2lsbGFyeSBkYXRhIQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKClRoZSBrZXJuZWwgdmVyc2lv
biBvZiBteSB0ZXN0IGVudmlyb25tZW50IHdhcyA1LiA0LiBCdXQgSSBsb29rZWQgYXQgdGhlIGxh
dGVzdCBjb2RlIGFuZCB0aGUgdmFsaWRhdGlvbiBsb2dpYyBoZXJlIGlzIHRoZSBzYW1lCi0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KCgogICAgLy8ga2VybmVsL2JwZi9kZXZtYXAuYwogICAgI2RlZmluZSBE
RVZfQ1JFQVRFX0ZMQUdfTUFTSyBcCiAgICAgICAgIChCUEZfRl9OVU1BX05PREUgfCBCUEZfRl9S
RE9OTFkgfCBCUEZfRl9XUk9OTFkpCgogICAgc3RhdGljIGludCBkZXZfbWFwX2luaXRfbWFwKHN0
cnVjdCBicGZfZHRhYiAqZHRhYiwgdW5pb24gYnBmX2F0dHIgKmF0dHIpCiAgICB7CiAgICAgICAu
Li4KICAJLyogY2hlY2sgc2FuaXR5IG9mIGF0dHJpYnV0ZXMgKi8KICAJaWYgKGF0dHItPm1heF9l
bnRyaWVzID09IDAgfHwgYXR0ci0+a2V5X3NpemUgIT0gNCB8fAogICAgICAJCWF0dHItPnZhbHVl
X3NpemUgIT0gNCB8fCBhdHRyLT5tYXBfZmxhZ3MgJiB+REVWX0NSRUFURV9GTEFHX01BU0spICAv
LyAgPC0tLSAgaGVyZSwgZmFpbHVyZSBvY2N1cnMgd2hlbiBmbGFnIGlzIHNldCB0byAweDgwCiAg
ICAJCXJldHVybiAtRUlOVkFMOwoKCiAgICAgICAgIGF0dHItPm1hcF9mbGFncyB8PSBCUEZfRl9S
RE9OTFlfUFJPRzsKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCgoKCgoKCkF0IDIwMjEtMDctMjkgMDI6
MDE6MDAsICJadmkgRWZmcm9uIiA8emVmZnJvbkByaW90Z2FtZXMuY29tPiB3cm90ZToKPk9uIFR1
ZSwgSnVsIDI3LCAyMDIxIGF0IDg6MDUgUE0gRyA8Y2hhcHRlcms5M0AxNjMuY29tPiB3cm90ZToK
Pj4KPj4gSGkgQlBGIEV4cGVydHMKPj4KPj4gSSdtIGhhdmluZyBhbiBpc3N1ZSB3aXRoIHVzaW5n
ICJCUEZfTUFQX1RZUEVfREVWTUFQIiB3aGVuIHBpbm5pbmcgaXQgdG8gYSBnbG9iYWwgcGF0aCBm
b3Igc2hhcmluZyB3aXRoIG11bHRpcGxlIHByb2dyYW1zLgo+PiBJIHVzZWQgaXByb3V0ZTIgdG8g
bG9hZCB0aGUgcHJvZ3JhbSwgdGhlIHBhcmFtZXRlcnMgZm9yIGNyZWF0aW5nIGEgbWFwIGFyZSBh
cyBmb2xsb3dzOgo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+ICAgICBzdHJ1Y3QgYnBm
X2VsZl9tYXAgQlBGTV9TRUNfTUFQUyBkZXZfbWFwX3Rlc3QgPSB7Cj4+ICAgICAgICAgLnR5cGUg
ICAgICAgICAgICAgICAgPSBCUEZfTUFQX1RZUEVfREVWTUFQLAo+PiAgICAgICAgIC5zaXplX2tl
eSAgICAgICA9IHNpemVvZihpbnQzMiksCj4+ICAgICAgICAgLnNpemVfdmFsdWUgICA9IHNpemVv
ZihpbnQzMiksCj4+ICAgICAgICAgLm1heF9lbGVtICAgPSAxLAo+PiAgICAgICAgIC5mbGFncyAg
ICAgICAgICAgICAgID0gMCwKPj4gICAgICAgICAucGlubmluZyAgICAgICAgID0gUElOX0dMT0JB
TF9OUywKPj4gICAgIH07Cj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4KPj4gSGVyZSBJ
IHNldCB0aGUgZmxhZ3MgdG8gMCwgYnV0IHRoZSBhY3R1YWwgbWFwIGlzIGNyZWF0ZWQgd2l0aCBm
bGFncyAweDgwLCBzbyB3aGVuIHRoZSBzZWNvbmQgcHJvZ3JhbSBpcyBsb2FkZWQsIG1hcCBwYXJh
bWV0ZXIgY2hlY2sgaXMgaW5jb3JyZWN0Lgo+PiBXaGVuIEkgdHJpZWQgdG8gc2V0IHRoZSBmbGFn
cyBkaXJlY3RseSB0byAweDgwLCBJIGZhaWxlZCB3aXRoIHRoZSBwYXJhbWV0ZXIgZXJyb3IgYC1F
SU5WQWAgIHdoZW4gdGhlIGZpcnN0IHByb2dyYW0gd2FzIGxvYWRlZAo+PiBUaGUgZ2VuZXJhbCBw
cm9jZXNzIGZvciBpcHJvdXRlMiB0byBjcmVhdGUgYSBtYXAgd2l0aCBhIHBpbiB0YWcgaXMgYXMg
Zm9sbG93czoKPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4gYnBmX21hcF9hdHRhY2gK
Pj4gLT4gYnBmX3Byb2JlX3Bpbm5lZAo+PiAgICAgYnBmX21hcF9zZWxmY2hlY2tfcGlubmVkCj4+
ICAgICAtPiBicGZfZGVyaXZlX2VsZl9tYXBfZnJvbV9mZGluZm8KPj4gICAgICAgICAgYnBmX21h
cF9waW5fcmVwb3J0Cj4+ICAgICAgICAgIC0+IGlmIChvYmotPmZsYWdzICE9IHBpbi0+ZmxhZ3Mp
Cj4+ICAgICAgICAgICAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIiAtIEZsYWdzOiAgICAgICAg
JSN4IChvYmopICE9ICUjeCAocGluKVxuIiwgb2JqLT5mbGFncywgcGluLT5mbGFncyk7Cj4+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+Cj4+IEkgaGF2ZSB0cmllZCB0byByZWFkIHRoZSBy
ZWxldmFudCBrZXJuZWwgY29kZSA6Cj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+ICAg
ICAvLyBrZXJuZWwvYnBmL2Rldm1hcC5jCj4+ICAgICAjZGVmaW5lIERFVl9DUkVBVEVfRkxBR19N
QVNLIFwKPj4gICAgICAgICAgKEJQRl9GX05VTUFfTk9ERSB8IEJQRl9GX1JET05MWSB8IEJQRl9G
X1dST05MWSkKPj4KPj4gICAgIHN0YXRpYyBpbnQgZGV2X21hcF9pbml0X21hcChzdHJ1Y3QgYnBm
X2R0YWIgKmR0YWIsIHVuaW9uIGJwZl9hdHRyICphdHRyKQo+PiAgICAgewo+PiAgICAgICAgLi4u
Cj4+ICAgICAgICAgLyogY2hlY2sgc2FuaXR5IG9mIGF0dHJpYnV0ZXMgKi8KPj4gICAgICAgICBp
ZiAoYXR0ci0+bWF4X2VudHJpZXMgPT0gMCB8fCBhdHRyLT5rZXlfc2l6ZSAhPSA0IHx8Cj4+ICAg
ICAgICAgICAgICAgICBhdHRyLT52YWx1ZV9zaXplICE9IDQgfHwgYXR0ci0+bWFwX2ZsYWdzICYg
fkRFVl9DUkVBVEVfRkxBR19NQVNLKQo+PiAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7
Cj4+Cj4+ICAgICAgICAgLyogTG9va3VwIHJldHVybnMgYSBwb2ludGVyIHN0cmFpZ2h0IHRvIGRl
di0+aWZpbmRleCwgc28gbWFrZSBzdXJlIHRoZQo+PiAgICAgICAgICAqIHZlcmlmaWVyIHByZXZl
bnRzIHdyaXRlcyBmcm9tIHRoZSBCUEYgc2lkZQo+PiAgICAgICAgICAqLwo+PiAgICAgICAgIGF0
dHItPm1hcF9mbGFncyB8PSBCUEZfRl9SRE9OTFlfUFJPRzsKPj4gICAgICAgICAuLi4KPj4gICAg
IH0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4KPj4gQXQgdGhlIHRpbWUgb2YgY2hl
Y2sgLCBpdCBkb2VzIG5vdCBhbGxvdyAweDgwIHRvIGJlIHNldCAoREVWX0NSRUFURV9GTEFHX01B
U0spICwgYnV0IHRoZW4gdGhlIGNvZGUgc2V0cyB0aGUgMHg4MCBmbGFnIGl0c2VsZi4KPgo+SXQg
bG9va3MgbGlrZSB0aGUga2VybmVsIGl0c2VsZiBpcyBzZXR0aW5nIHRoZSBmbGFncyB0byAweDgw
IHdoZW4gaXQKPmluaXRpYWxpemVzIGEgZGV2bWFwWzFdLiAoTm90ZTogQlBGX1BST0dfUkVBRE9O
TFkgaXMgMHg4MC5bMl0pCj4KPkkgYmVsaWV2ZSB5b3UgZG8gbm90IG5lZWQgdG8gd29ycnkgYWJv
dXQgc2V0dGluZyB0aGlzIGZsYWcgd2hlbiB5b3UgY2FsbCB0aGUKPkJQRl9NQVBfQ1JFQVRFIHN5
c2NhbGwuCj4KPlsxXSBodHRwczovL2VsaXhpci5ib290bGluLmNvbS9saW51eC92NS4xMy41L3Nv
dXJjZS9rZXJuZWwvYnBmL2Rldm1hcC5jI0wxMjYKPlsyXSBodHRwczovL2VsaXhpci5ib290bGlu
LmNvbS9saW51eC92NS4xMy41L3NvdXJjZS9pbmNsdWRlL3VhcGkvbGludXgvYnBmLmgjTDExNzkK
Pgo+PiBTbyBJJ20gbm90IHN1cmUgaWYgd2Ugc2hvdWxkIGFsbG93IDB4ODAgb24gdGhlIGNoZWNr
IGhlcmUgYXMgd2VsbCA/IElmIGFueW9uZSBoYXMgc3VnZ2VzdGlvbnMgcGxlYXNlIGxldCBtZSBr
bm93LCB0aGFua3MuCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+ICAgICAjZGVmaW5l
IERFVl9DUkVBVEVfRkxBR19NQVNLIFwKPj4gICAgICAgICAgKEJQRl9GX05VTUFfTk9ERSB8IEJQ
Rl9GX1JET05MWSB8IEJQRl9GX1dST05MWSB8IEJQRl9GX1JET05MWV9QUk9HKQo+PiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQo+Pgo+PiBCZXN0IHJlZ2FyZHMKPj4gVy5HYW8KCgoKwqA=
